(this.webpackJsonpfinances_client=this.webpackJsonpfinances_client||[]).push([[0],{15:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),c=a(20),o=a.n(c),i=a(4),r=a(12),d=a(2),l=a(16),m=a.n(l),b=a(21),j=a.p+"static/media/logo.2eea6f89.svg",u=a(11),h=a(10),O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(n.useState)(e),a=Object(i.a)(t,2),s=a[0],c=a[1],o=function(){c(e)},r=function(e){var t=e.target;c(Object(h.a)(Object(h.a)({},s),{},Object(u.a)({},t.name,t.value)))};return[s,r,o]},p=Object(n.createContext)(),x=a(8),f=a.n(x),v=(a(30),function(e,t,a){var n=document.querySelector(e);"SUCCESS"===a&&(a={icon:"check-circle",color:"success"}),"ERROR"===a&&(a={icon:"exclamation-circle",color:"danger"});var s=document.createElement("div");s.innerHTML='\n            <div class="toast show animate__animated animate__fadeInDown" role="alert" aria-live="assertive" aria-atomic="true">\n                <div class="d-flex justify-content-center">\n                    <div class="toast-body">\n                    <i class="fas fa-'.concat(a.icon," px-1 text-").concat(a.color,'"></i> ').concat(t,"\n                    </div>\n                </div>\n            </div>"),!document.querySelector(".toast")&&n&&(n.append(s),setTimeout((function(){document.querySelector(".toast")&&document.querySelector(".toast").remove()}),3e3)),console.clear()});v.propTypes={container:f.a.string.isRequired,value:f.a.string.isRequired};var g="[auth] login",N="[auth] logout",y=(a(31),a(0)),R=function(e){var t=e.history,a=Object(n.useContext)(p).dispatch,s=Object(n.useState)(!1),c=Object(i.a)(s,2),o=c[0],r=c[1],d=O({email:"",password:""}),l=Object(i.a)(d,3),u=l[0],h=l[1],x=l[2],f=u.email,N=u.password,R=function(){var e=Object(b.a)(m.a.mark((function e(t){var n,s,c,o,i,d,l,b;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.user_id,s=t.user_email,c=t.user_firstname,o=t.user_lastname,i=t.user_nickname,d=t.user_password,l=t.user_profilepic,N===d){e.next=4;break}return v(".container","ERROR: password is incorrect","ERROR"),e.abrupt("return");case 4:return(b=document.querySelector(".btn-login")).innerText="WAIT!",b.disabled=!0,e.next=9,a({type:g,payload:{id:n,username:i,password:d,name:c,lastname:o,email:s,profilepic:l}});case 9:x(),r(!0);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){o&&t.push("/dashboard")}),[o]),Object(y.jsx)("div",{className:"container text-center my-5 d-flex align-items-center justify-content-center animate__animated animate__fadeInDown",children:Object(y.jsxs)("div",{className:"card form-content shadow d-flex align-items-center justify-content-center login-container",children:[Object(y.jsx)("img",{className:"img-fluid logo-login",src:j,alt:"Finances App Logo"}),Object(y.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==f&&""!==N?f.length<6||N.length<6?v(".container","Email/password too short.","ERROR"):fetch("".concat("http://192.168.1.31:4000","/api/users/u/").concat(f)).then((function(e){return e.json()})).then((function(e){e.error?v(".container","Email not found in database.","ERROR"):R(e[0])})).catch((function(e){v(".container","FATAL: ".concat(e),"ERROR")})):v(".container","Email/password is empty.","ERROR")},children:[Object(y.jsx)("input",{type:"email",autoComplete:"true",className:"form-control",name:"email",placeholder:"email",value:f,onChange:h,required:!0}),Object(y.jsx)("input",{type:"password",autoComplete:"false",className:"form-control",name:"password",placeholder:"password",value:N,onChange:h,required:!0}),Object(y.jsx)("button",{className:"btn btn-login shadow",children:"LOGIN"})]}),Object(y.jsx)("div",{className:"form-footer mt-5",children:Object(y.jsx)("button",{className:"links",onClick:function(){return v(".container","Not implemented yet, sorry.","ERROR")},children:"Forgot Password"})})]})})},_=function(){return Object(y.jsxs)(d.d,{children:[Object(y.jsx)(d.b,{exact:!0,path:"/login",component:R}),Object(y.jsx)(d.b,{exact:!0,path:"/",component:R}),Object(y.jsx)(d.a,{to:"/"})]})},w=a.p+"static/media/logo_white.671d8380.svg",E=(a(36),function(e){var t=e.dispatch,a=Object(d.g)();return Object(y.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-brand shadow py-3 px-0 d-flex justify-content-between animate__animated animate__fadeInDown",children:[Object(y.jsx)(r.b,{to:"/",children:Object(y.jsx)("img",{className:"img-fluid nv-logo",src:w,alt:"Logo"})}),Object(y.jsx)("div",{className:"mx-3",children:Object(y.jsxs)("button",{className:"btn btn-logout mx-2",onClick:function(){t({type:N}),a.replace("/")},children:[Object(y.jsx)("i",{className:"fa fa-sign-out me-1","aria-hidden":"true"})," Logout"]})})]})}),S=function(e){var t=e.data,a=t.movement_amount,n=t.movement_date,s=t.movement_description,c=t.movement_type;return Object(y.jsx)("div",{className:"container-fluid container-list my-2",children:Object(y.jsxs)("div",{className:"row row-cols-2",children:[Object(y.jsxs)("div",{className:"col w-75",children:[Object(y.jsx)("i",{className:"fas fa-circle text-".concat(c," me-3")}),s]}),Object(y.jsxs)("div",{className:"col text-".concat(c," w-25 col-mov-amount"),children:["$",a]}),Object(y.jsx)("div",{className:"col mb-0 pb-0 w-75"}),Object(y.jsx)("div",{className:"col mt-0 fst-italic w-25 col-mov-date",children:n&&n.toString().substr(0,10)})]})})},C=(a(15),function(e){var t=e.edit,a=e.data,s=Object(n.useContext)(p),c=s.user,o=s.reload,r=s.setReload,d={type:t?a.movement_type:"",date:t?a.movement_date.toString().substr(0,10):(new Date).toISOString().split("T")[0],description:t?a.movement_description:"",amount:t?a.movement_amount:0},l=O(d),m=Object(i.a)(l,3),b=m[0],j=m[1],u=m[2],h=b.amount,x=b.date,f=b.description,g=b.type;Object(n.useEffect)((function(){u()}),[t,a]);return Object(y.jsx)("div",{className:"modal fade",id:"dashboardModalForm","data-bs-backdrop":"static","data-bs-keyboard":"false",tabIndex:"-1","aria-labelledby":"dashboardModalFormLabel","aria-hidden":"true",children:Object(y.jsx)("div",{className:"modal-dialog",children:Object(y.jsxs)("div",{className:"modal-content",children:[Object(y.jsxs)("div",{className:"modal-header modal-header-add py-2",children:[Object(y.jsxs)("h5",{className:"modal-title",id:"dashboardModalFormLabel",children:[Object(y.jsx)("i",{className:"fas fa-cloud-upload-alt mx-2"}),t?"Edit movement":"Insert new movement"]}),Object(y.jsx)("button",{type:"button",className:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(y.jsx)("div",{className:"modal-body",children:Object(y.jsxs)("form",{id:"modal-add",onSubmit:function(e){e.preventDefault(),0!==h&&""!==f?f.length<6?v(".modal","Description too short.","ERROR"):""!==g?function(){var e="http://192.168.1.31:4000",n={userid:c.id,date:x,type:g,amount:parseInt(h),description:f};fetch(t?"".concat(e,"/api/movements/").concat(a.movement_id):"".concat(e,"/api/movements"),{method:t?"PUT":"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){if(!e.error)return e.success?(v(".container","GREAT! Movement has been processed","SUCCESS"),r(!o),u(),void document.querySelector(".btn-form-close").click()):void 0;v(".modal","ERROR: database operation has failed (".concat(e.error,")"),"ERROR")})).catch((function(e){v(".modal","FATAL: ".concat(e),"ERROR")}))}():v(".modal","You must choose a type","ERROR"):v(".modal","Description is empty or amount is zero.","ERROR")},children:[Object(y.jsx)("div",{className:"input-group flex-nowrap",children:Object(y.jsxs)("select",{className:"form-select",name:"type",value:g,onChange:j,disabled:!!t,children:[Object(y.jsx)("option",{value:"",children:"Choose type"}),Object(y.jsx)("option",{value:"ING",children:"INGRESS"}),Object(y.jsx)("option",{value:"EGR",children:"EGRESS"})]})}),Object(y.jsx)("div",{className:"input-group flex-nowrap",children:Object(y.jsx)("input",{autoComplete:"false",className:"form-control",type:"date",max:x,name:"date",value:x,selected:x,onChange:j,required:!0})}),Object(y.jsx)("div",{className:"input-group flex-nowrap",children:Object(y.jsx)("input",{type:"number",className:"form-control",placeholder:"Amount",name:"amount",value:h,onChange:j,required:!0})}),Object(y.jsx)("div",{className:"input-group flex-nowrap",children:Object(y.jsx)("input",{type:"text",className:"form-control",placeholder:"Description",maxLength:"25",name:"description",value:f,onChange:j,required:!0})})]})}),Object(y.jsxs)("div",{className:"modal-footer",children:[Object(y.jsx)("button",{type:"button",className:"btn btn-secondary btn-form-close px-3","data-bs-dismiss":"modal",children:"Close"}),Object(y.jsx)("button",{type:"submit",className:"btn btn-send py-2 px-4",form:"modal-add",children:"Send"})]})]})})})}),I=function(e){var t=e.id,a=Object(n.useContext)(p),s=a.reload,c=a.setReload;return Object(y.jsx)("div",{className:"modal fade",id:"deleteModal","data-bs-backdrop":"static","data-bs-keyboard":"false","data-id":"",tabIndex:"-1","aria-labelledby":"deleteModalLabel","aria-hidden":"true",children:Object(y.jsx)("div",{className:"modal-dialog",children:Object(y.jsxs)("div",{className:"modal-content",children:[Object(y.jsxs)("div",{className:"modal-header modal-header-delete p-2",children:[Object(y.jsx)("i",{className:"fas fa-exclamation-triangle mx-2"}),Object(y.jsx)("h5",{className:"modal-title",id:"deleteModalLabel",children:"WARNING!"}),Object(y.jsx)("button",{type:"button",className:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(y.jsx)("div",{className:"modal-body text-center modal-delete-text",children:-999999===t?"THIS WILL REMOVE ALL MOVEMENTS IN DATABASE.\n Are you sure you want to perform this action?":"Are you sure you want to remove this movement?"}),Object(y.jsxs)("div",{className:"modal-footer justify-content-center",children:[Object(y.jsx)("button",{type:"button",className:"btn btn-secondary btn-delete-close","data-bs-dismiss":"modal",children:"Cancel"}),Object(y.jsxs)("form",{onSubmit:function(e){var a="http://192.168.1.31:4000";e.preventDefault(),fetch(-999999===t?"".concat(a,"/api/movements/"):"".concat(a,"/api/movements/").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){if(!e.error)return e.success?(c(!s),void document.querySelector(".btn-delete-close").click()):void 0;v(".span-toast","ERROR: database operation has failed (".concat(e.error,")"),"ERROR")})).catch((function(e){v(".span-toast","FATAL: ".concat(e),"ERROR")}))},children:[Object(y.jsx)("button",{type:"submit",className:"btn btn-danger",children:"Do it!"}),Object(y.jsx)("span",{className:"span-toast"})]})]})]})})})},k=function(e){var t=e.data,a=Object(n.useState)(0),s=Object(i.a)(a,2),c=s[0],o=s[1],r=Object(n.useState)(!1),d=Object(i.a)(r,2),l=d[0],m=d[1],b=Object(n.useState)({}),j=Object(i.a)(b,2),u=j[0],h=j[1],O=Object(n.useState)({value:0,negative:!1}),p=Object(i.a)(O,2),x=p[0],f=p[1];return Object(n.useEffect)((function(){var e=0;t.length>0&&t.forEach((function(t){"ING"===t.movement_type&&(e+=parseInt(t.movement_amount)),"EGR"===t.movement_type&&(e-=parseInt(t.movement_amount))})),-1===Math.sign(e)?f({value:e,class:"text-danger"}):f({value:e,class:""})}),[t]),Object(y.jsxs)("div",{className:"container",children:[Object(y.jsxs)("div",{className:"row row-cols-1 row-cols-md-2 g-4 my-5",children:[Object(y.jsx)("div",{className:"col",children:Object(y.jsxs)("div",{className:"card shadow rounded border-0 card-left animate__animated animate__fadeInLeft container-toast-fixed",children:[Object(y.jsxs)("div",{className:"card-body",children:[Object(y.jsxs)("p",{className:"card-title",children:[Object(y.jsx)("i",{className:"fa fa-money px-3","aria-hidden":"true"}),"Current Amount"]}),Object(y.jsx)("hr",{}),Object(y.jsxs)("p",{className:"card-amount px-3 ".concat(x.class),children:["$",x.value]}),Object(y.jsx)("hr",{})]}),Object(y.jsxs)("div",{className:"d-flex justify-content-center",children:[Object(y.jsx)("button",{className:"btn btn-add mx-3 mb-4 p-2 shadow-sm","data-bs-toggle":"modal","data-bs-target":"#dashboardModalForm",onClick:function(){return m(!1)},children:"Add movement"}),Object(y.jsx)("button",{className:"btn btn-danger mx-3 mb-4 p-2 shadow-sm","data-bs-toggle":"modal","data-bs-target":"#deleteModal",onClick:function(){return o(-999999)},children:"Clean movements"})]})]})}),Object(y.jsx)("div",{className:"col",children:Object(y.jsx)("div",{className:"card shadow rounded border-0 card-movements animate__animated animate__fadeInRight",children:Object(y.jsxs)("div",{className:"card-body",children:[Object(y.jsxs)("p",{className:"card-title",children:[Object(y.jsx)("i",{className:"fa fa-bar-chart p-2","aria-hidden":"true"}),"Your activity"]}),Object(y.jsx)("hr",{}),Object(y.jsx)("ul",{className:"list-group list-group-flush",children:t.length>0&&t.map((function(e){return Object(y.jsxs)("li",{className:"list-group-item",children:[Object(y.jsx)(S,{data:e}),Object(y.jsxs)("div",{className:"mb-3 mx-4 fst-italic w-75 footer-list",children:[Object(y.jsx)("i",{className:"movement-type"}),e.movement_type,Object(y.jsx)("button",{className:"btn btn-outline-secondary btn-sm btn-list-edit mx-2","data-bs-toggle":"modal","data-bs-target":"#dashboardModalForm",onClick:function(){m(!0),h(e)},children:"Edit"}),Object(y.jsx)("button",{className:"btn btn-outline-secondary btn-sm btn-list-delete ms-0","data-bs-toggle":"modal","data-bs-target":"#deleteModal",onClick:function(){return o(e.movement_id)},children:"Delete"})]})]},"".concat(e.movement_id))}))})]})})}),Object(y.jsx)("div",{className:"col",children:Object(y.jsx)("div",{className:"card shadow rounded border-0 card-movements animate__animated animate__fadeInRight",children:Object(y.jsxs)("div",{className:"card-body",children:[Object(y.jsxs)("p",{className:"card-title",children:[Object(y.jsx)("i",{className:"fa fa-arrow-up p-2","aria-hidden":"true"}),"Ingress"]}),Object(y.jsx)("hr",{}),Object(y.jsx)("ul",{className:"list-group list-group-flush",children:t.length>0&&t.map((function(e){return"ING"===e.movement_type?Object(y.jsxs)("li",{className:"list-group-item",children:[Object(y.jsx)(S,{data:e}),Object(y.jsxs)("div",{className:"mb-3 mx-4 fst-italic w-75 footer-list",children:[Object(y.jsx)("i",{className:"movement-type"}),e.movement_type,Object(y.jsx)("button",{className:"btn btn-outline-secondary btn-sm btn-list-edit mx-2","data-bs-toggle":"modal","data-bs-target":"#dashboardModalForm",onClick:function(){m(!0),h(e)},children:"Edit"}),Object(y.jsx)("button",{className:"btn btn-outline-secondary btn-sm btn-list-delete ms-0","data-bs-toggle":"modal","data-bs-target":"#deleteModal",onClick:function(){return o(e.movement_id)},children:"Delete"})]})]},"".concat(e.movement_id)):""}))})]})})}),Object(y.jsx)("div",{className:"col",children:Object(y.jsx)("div",{className:"card shadow rounded border-0 card-movements animate__animated animate__fadeInRight",children:Object(y.jsxs)("div",{className:"card-body",children:[Object(y.jsxs)("p",{className:"card-title",children:[Object(y.jsx)("i",{className:"fas fa-arrow-down p-2","aria-hidden":"true"}),"Egress"]}),Object(y.jsx)("hr",{}),Object(y.jsx)("ul",{className:"list-group list-group-flush",children:t.length>0&&t.map((function(e){return"EGR"===e.movement_type?Object(y.jsxs)("li",{className:"list-group-item",children:[Object(y.jsx)(S,{data:e}),Object(y.jsxs)("div",{className:"mb-3 mx-4 fst-italic w-75 footer-list",children:[Object(y.jsx)("i",{className:"movement-type"}),e.movement_type,Object(y.jsx)("button",{className:"btn btn-outline-secondary btn-sm btn-list-edit mx-2","data-bs-toggle":"modal","data-bs-target":"#dashboardModalForm",onClick:function(){m(!0),h(e)},children:"Edit"}),Object(y.jsx)("button",{className:"btn btn-outline-secondary btn-sm btn-list-delete ms-0","data-bs-toggle":"modal","data-bs-target":"#deleteModal",onClick:function(){return o(e.movement_id)},children:"Delete"})]})]},"".concat(e.movement_id)):""}))})]})})})]}),Object(y.jsx)(C,{edit:l,data:u}),Object(y.jsx)(I,{id:c})]})},M=function(){var e=Object(n.useContext)(p),t=e.user,a=e.dispatch,s=e.reload,c=t.id,o=Object(n.useState)([{}]),r=Object(i.a)(o,2),d=r[0],l=r[1];return Object(n.useEffect)((function(){fetch("".concat("http://192.168.1.31:4000","/api/movements/").concat(c)).then((function(e){return e.json()})).then((function(e){l(e)})).catch((function(e){l([{}])}))}),[c,s]),Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(E,{user:t,dispatch:a}),Object(y.jsx)("div",{className:"container",children:Object(y.jsx)(k,{data:d})})]})},A=function(){return Object(y.jsxs)(d.d,{children:[Object(y.jsx)(d.b,{exact:!0,path:"/dashboard",component:M}),Object(y.jsx)(d.b,{exact:!0,path:"/",component:M}),Object(y.jsx)(d.a,{to:"/"})]})},L=function(){var e=Object(n.useContext)(p).user;return Object(y.jsx)(r.a,{children:Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(d.d,{children:e.logged?Object(y.jsx)(A,{}):Object(y.jsx)(_,{})})})})},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(h.a)(Object(h.a)({},t.payload),{},{logged:!0});case N:return{logged:!1};default:return e}},D=function(){var e=Object(n.useReducer)(T,{},(function(){return JSON.parse(localStorage.getItem("user"))||{logged:!1}})),t=Object(i.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(!1),o=Object(i.a)(c,2),r=o[0],d=o[1];return Object(n.useEffect)((function(){localStorage.setItem("user",JSON.stringify(a))}),[a]),Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(p.Provider,{value:{user:a,dispatch:s,reload:r,setReload:d},children:Object(y.jsx)(L,{})})})};a(37);o.a.render(Object(y.jsx)(s.a.StrictMode,{children:Object(y.jsx)(D,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.5b4b63e5.chunk.js.map